--// ETFB Rayfield GUI — God Mode + Fast Take + VIP Bypass + ESP
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local PPS = game:GetService("ProximityPromptService")
local StarterGui = game:GetService("StarterGui")
local camera = workspace.CurrentCamera
local player = Players.LocalPlayer

local function showNotification(title, message)
	StarterGui:SetCore("SendNotification", {
		Title = title;
		Text = message;
		Duration = 4;
	})
end

--------------------------------------------------------
-- GOD MODE
--------------------------------------------------------
local isGodmode = false
local ghostClone, gmConnection, noclipConn, deathConn = nil, nil, nil, nil
local lastPromptUpdate = 0

local function cleanupGodmode()
	isGodmode = false
	if gmConnection then gmConnection:Disconnect() gmConnection = nil end
	if noclipConn then noclipConn:Disconnect() noclipConn = nil end
	if deathConn then deathConn:Disconnect() deathConn = nil end
	local char = player.Character
	if char then
		local root = char:FindFirstChild("HumanoidRootPart")
		if root and ghostClone and ghostClone:FindFirstChild("HumanoidRootPart") then
			root.CFrame = ghostClone.HumanoidRootPart.CFrame
		end
		if char:FindFirstChild("Humanoid") then
			char.Humanoid.PlatformStand = false
			camera.CameraSubject = char.Humanoid
		end
	end
	if ghostClone then ghostClone:Destroy() ghostClone = nil end
end

local function enableGodmode()
	local char = player.Character
	if not char or not char:FindFirstChild("HumanoidRootPart") then return end
	cleanupGodmode()
	isGodmode = true
	char.Archivable = true
	ghostClone = char:Clone()
	ghostClone.Name = "GhostDecoy"
	ghostClone.Parent = workspace
	char.Archivable = false
	for _, v in pairs(ghostClone:GetDescendants()) do
		if v:IsA("BasePart") then
			v.Transparency = (v.Name:lower():find("root") or v.Name:lower():find("collision")) and 0.5 or 0
			v.CanCollide = true
		elseif v:IsA("Decal") or v:IsA("Texture") then
			v.Transparency = 0
		end
	end
	if char:FindFirstChild("Animate") then char.Animate:Clone().Parent = ghostClone end
	char.Humanoid.PlatformStand = true
	camera.CameraSubject = ghostClone.Humanoid
	noclipConn = RunService.Stepped:Connect(function()
		if char then
			for _, v in pairs(char:GetDescendants()) do
				if v:IsA("BasePart") then v.CanCollide = false end
			end
		end
	end)
	gmConnection = RunService.Heartbeat:Connect(function()
		if ghostClone and char and char:FindFirstChild("HumanoidRootPart") then
			local moveDir = char.Humanoid.MoveDirection
			ghostClone.Humanoid:Move(moveDir, false)
			ghostClone.Humanoid.Jump = char.Humanoid.Jump
			if moveDir.Magnitude > 0 then
				local targetRot = CFrame.lookAt(ghostClone.HumanoidRootPart.Position, ghostClone.HumanoidRootPart.Position + moveDir)
				ghostClone.HumanoidRootPart.CFrame = ghostClone.HumanoidRootPart.CFrame:Lerp(targetRot, 0.25)
			end
			if tick() - lastPromptUpdate > 0.5 then
				for _, p in pairs(workspace:GetDescendants()) do
					if p:IsA("ProximityPrompt") then
						p.MaxActivationDistance = 25
						p.RequiresLineOfSight = false
					end
				end
				lastPromptUpdate = tick()
			end
			char.HumanoidRootPart.CFrame = ghostClone.HumanoidRootPart.CFrame * CFrame.new(0, -15, 0)
			char.HumanoidRootPart.Velocity = Vector3.zero
		else
			cleanupGodmode()
		end
	end)
	deathConn = char.Humanoid.Died:Connect(cleanupGodmode)
end

player.CharacterAdded:Connect(function()
	if isGodmode then task.wait(0.5) enableGodmode() end
end)

--------------------------------------------------------
-- FAST TAKE
--------------------------------------------------------
local instantTakeConn = nil

local function enableInstantTake()
	if instantTakeConn then return end
	instantTakeConn = PPS.PromptButtonHoldBegan:Connect(function(prompt)
		pcall(function() fireproximityprompt(prompt) end)
	end)
end

local function disableInstantTake()
	if instantTakeConn then
		instantTakeConn:Disconnect()
		instantTakeConn = nil
	end
end

--------------------------------------------------------
-- VIP BYPASS
--------------------------------------------------------
local vipEnabled = false
local vipConnection = nil
local vipBackup = {}

local function getVIP()
	local map = workspace:FindFirstChild("DefaultMap_SharedInstances", true)
	if not map then return end
	return map:FindFirstChild("VIPWalls")
end

local function backupVIP(vip)
	vipBackup = {}
	for _, v in ipairs(vip:GetChildren()) do
		table.insert(vipBackup, v:Clone())
	end
end

local function restoreVIP(vip)
	vip:ClearAllChildren()
	for _, v in ipairs(vipBackup) do
		v:Clone().Parent = vip
	end
end

local function enableVIP()
	local vip = getVIP()
	if not vip then return end
	if #vipBackup == 0 then backupVIP(vip) end
	vipConnection = RunService.Heartbeat:Connect(function()
		for _, v in ipairs(vip:GetDescendants()) do
			if v:IsA("BasePart") then v.CanCollide = false end
			if v:IsA("GuiObject") or v:IsA("Decal") or v:IsA("Texture") or v.Name:lower():match("vip") then
				pcall(function() v:Destroy() end)
			end
		end
	end)
end

local function disableVIP()
	if vipConnection then vipConnection:Disconnect() vipConnection = nil end
	local vip = getVIP()
	if vip and #vipBackup > 0 then restoreVIP(vip) end
end

--------------------------------------------------------
-- LUCKY BLOCK ESP
--------------------------------------------------------
local luckyESPEnabled = false
local luckyESPConnAdd, luckyESPConnRemove = nil, nil

-- "All" means no filter. Otherwise only blocks matching this rarity are shown.
local luckyESPFilter = "All"

local RARITY_COLORS = {
	COMMON      = Color3.fromRGB(200, 200, 200),
	UNCOMMON    = Color3.fromRGB(80,  200, 80),
	RARE        = Color3.fromRGB(80,  120, 255),
	EPIC        = Color3.fromRGB(160, 60,  220),
	LEGENDARY   = Color3.fromRGB(255, 170, 0),
	MYTHICAL    = Color3.fromRGB(255, 80,  80),
	COSMIC      = Color3.fromRGB(0,   220, 255),
	SECRET      = Color3.fromRGB(255, 0,   120),
	CELESTIAL   = Color3.fromRGB(200, 230, 255),
	DIVINE      = Color3.fromRGB(255, 255, 100),
	RADIOACTIVE = Color3.fromRGB(100, 255, 60),
	UFO         = Color3.fromRGB(60,  255, 200),
	MYTHIC      = Color3.fromRGB(255, 100, 60),
	ADMIN       = Color3.fromRGB(255, 50,  50),
}

local function getMainPart(obj)
	if obj:IsA("BasePart") then return obj end
	return obj:FindFirstChildWhichIsA("BasePart")
end

local function getLastWord(name)
	return name:match("_(%w+)$") or "unknown"
end

-- Checks whether a rarity passes the current filter
local function rarityAllowed(rarity)
	return luckyESPFilter == "All" or luckyESPFilter:upper() == rarity:upper()
end

local function addLuckyESP(obj)
	local part = getMainPart(obj)
	if not part then return end
	local rarity = getLastWord(obj.Name):upper()

	-- Remove existing ESP first so we can redraw with updated filter/colour
	if part:FindFirstChild("LuckyESP") then
		part.LuckyESP:Destroy()
	end

	if not rarityAllowed(rarity) then return end

	local color = RARITY_COLORS[rarity] or Color3.new(1, 1, 1)
	local bb = Instance.new("BillboardGui")
	bb.Name = "LuckyESP"
	bb.Size = UDim2.new(0, 90, 0, 20)
	bb.StudsOffset = Vector3.new(0, 3, 0)
	bb.AlwaysOnTop = true
	bb.MaxDistance = math.huge
	bb.Parent = part

	local txt = Instance.new("TextLabel")
	txt.Size = UDim2.new(1, 0, 1, 0)
	txt.BackgroundTransparency = 1
	txt.TextScaled = true
	txt.Font = Enum.Font.GothamBold
	txt.TextStrokeTransparency = 0
	txt.TextColor3 = color
	txt.Text = rarity
	txt.Parent = bb
end

local function removeLuckyESP(obj)
	local part = getMainPart(obj)
	if part and part:FindFirstChild("LuckyESP") then
		part.LuckyESP:Destroy()
	end
end

-- Refreshes all existing blocks against the current filter (called when filter changes)
local function refreshLuckyESP()
	local folder = workspace:FindFirstChild("ActiveLuckyBlocks")
	if not folder then return end
	for _, v in ipairs(folder:GetChildren()) do
		addLuckyESP(v)
	end
end

local function enableLuckyESP()
	local folder = workspace:FindFirstChild("ActiveLuckyBlocks")
	if not folder then
		showNotification("Lucky Block ESP", "ActiveLuckyBlocks folder not found!")
		return
	end
	for _, v in ipairs(folder:GetChildren()) do
		addLuckyESP(v)
	end
	luckyESPConnAdd = folder.ChildAdded:Connect(function(v)
		task.wait(0.2)
		addLuckyESP(v)
	end)
	luckyESPConnRemove = folder.ChildRemoved:Connect(function(v)
		removeLuckyESP(v)
	end)
end

local function disableLuckyESP()
	if luckyESPConnAdd then luckyESPConnAdd:Disconnect() luckyESPConnAdd = nil end
	if luckyESPConnRemove then luckyESPConnRemove:Disconnect() luckyESPConnRemove = nil end
	local folder = workspace:FindFirstChild("ActiveLuckyBlocks")
	if folder then
		for _, v in ipairs(folder:GetChildren()) do
			removeLuckyESP(v)
		end
	end
end

--------------------------------------------------------
-- INFINITE ZOOM
--------------------------------------------------------
local defaultMaxZoom = player.CameraMaxZoomDistance
local defaultMinZoom = player.CameraMinZoomDistance

local function enableInfiniteZoom()
	player.CameraMaxZoomDistance = math.huge
	player.CameraMinZoomDistance = 0.5
end

local function disableInfiniteZoom()
	player.CameraMaxZoomDistance = defaultMaxZoom
	player.CameraMinZoomDistance = defaultMinZoom
end

--------------------------------------------------------
-- BRAINROT ESP
-- Structure: ActiveBrainrots > [RarityFolder] > [BrainrotModel]
--------------------------------------------------------
local brainrotESPEnabled = false
local brainrotESPFilter  = "All"
local brainrotRarityConns = {} -- tracks per-rarity-folder connections

local BRAINROT_RARITY_COLORS = {
	COMMON   = Color3.fromRGB(200, 200, 200),
	UNCOMMON = Color3.fromRGB(80,  200, 80),
	RARE     = Color3.fromRGB(80,  120, 255),
	EPIC     = Color3.fromRGB(160, 60,  220),
	COSMIC   = Color3.fromRGB(0,   220, 255),
	LEGENDARY= Color3.fromRGB(255, 170, 0),
	MYTHICAL = Color3.fromRGB(255, 80,  80),
	SECRET   = Color3.fromRGB(255, 0,   120),
	CELESTIAL= Color3.fromRGB(200, 230, 255),
	DIVINE   = Color3.fromRGB(255, 255, 100),
	INFINITY = Color3.fromRGB(180, 0,   255),
}

local function brainrotRarityAllowed(rarity)
	return brainrotESPFilter == "All" or brainrotESPFilter:upper() == rarity:upper()
end

-- Adds ESP label to a single brainrot model, given its parent folder's rarity name
local function addBrainrotESP(obj, rarity)
	local part = getMainPart(obj)
	if not part then return end
	-- Remove existing first (handles filter refresh)
	if part:FindFirstChild("BrainrotESP") then
		part.BrainrotESP:Destroy()
	end
	if not brainrotRarityAllowed(rarity) then return end
	local color = BRAINROT_RARITY_COLORS[rarity:upper()] or Color3.fromRGB(255, 150, 50)
	local bb = Instance.new("BillboardGui")
	bb.Name = "BrainrotESP"
	bb.Size = UDim2.new(0, 100, 0, 22)
	bb.StudsOffset = Vector3.new(0, 4, 0)
	bb.AlwaysOnTop = true
	bb.MaxDistance = math.huge
	bb.Parent = part
	local txt = Instance.new("TextLabel")
	txt.Size = UDim2.new(1, 0, 1, 0)
	txt.BackgroundTransparency = 1
	txt.TextScaled = true
	txt.Font = Enum.Font.GothamBold
	txt.TextStrokeTransparency = 0
	txt.TextColor3 = color
	txt.Text = rarity:upper()
	txt.Parent = bb
end

local function removeBrainrotESP(obj)
	local part = getMainPart(obj)
	if part and part:FindFirstChild("BrainrotESP") then
		part.BrainrotESP:Destroy()
	end
end

-- Iterates all rarity subfolders and their children
local function forEachBrainrot(callback)
	local root = workspace:FindFirstChild("ActiveBrainrots")
	if not root then return end
	for _, rarityFolder in ipairs(root:GetChildren()) do
		if rarityFolder:IsA("Folder") or rarityFolder:IsA("Model") then
			local rarity = rarityFolder.Name
			for _, obj in ipairs(rarityFolder:GetChildren()) do
				callback(obj, rarity)
			end
		end
	end
end

local function refreshBrainrotESP()
	forEachBrainrot(function(obj, rarity)
		addBrainrotESP(obj, rarity)
	end)
end

local function enableBrainrotESP()
	local root = workspace:FindFirstChild("ActiveBrainrots")
	if not root then
		showNotification("Brainrot ESP", "ActiveBrainrots folder not found!")
		return
	end

	-- Initial pass
	refreshBrainrotESP()

	-- Watch each existing rarity folder for new brainrots
	for _, rarityFolder in ipairs(root:GetChildren()) do
		local rarity = rarityFolder.Name
		local connAdd = rarityFolder.ChildAdded:Connect(function(obj)
			task.wait(0.2)
			addBrainrotESP(obj, rarity)
		end)
		local connRemove = rarityFolder.ChildRemoved:Connect(function(obj)
			removeBrainrotESP(obj)
		end)
		table.insert(brainrotRarityConns, connAdd)
		table.insert(brainrotRarityConns, connRemove)
	end

	-- Watch for new rarity folders being added
	local connFolderAdd = root.ChildAdded:Connect(function(rarityFolder)
		task.wait(0.2)
		local rarity = rarityFolder.Name
		for _, obj in ipairs(rarityFolder:GetChildren()) do
			addBrainrotESP(obj, rarity)
		end
		local connAdd = rarityFolder.ChildAdded:Connect(function(obj)
			task.wait(0.2)
			addBrainrotESP(obj, rarity)
		end)
		local connRemove = rarityFolder.ChildRemoved:Connect(function(obj)
			removeBrainrotESP(obj)
		end)
		table.insert(brainrotRarityConns, connAdd)
		table.insert(brainrotRarityConns, connRemove)
	end)
	table.insert(brainrotRarityConns, connFolderAdd)
end

local function disableBrainrotESP()
	for _, conn in ipairs(brainrotRarityConns) do
		conn:Disconnect()
	end
	brainrotRarityConns = {}
	forEachBrainrot(function(obj)
		removeBrainrotESP(obj)
	end)
end


--------------------------------------------------------
-- UPGRADE SPEED / CARRY (MISC)
--------------------------------------------------------
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UpgradeSpeedRemote = ReplicatedStorage:WaitForChild("RemoteFunctions"):WaitForChild("UpgradeSpeed")

local autoUpgradeSpeed1  = false
local autoUpgradeSpeed10 = false

task.spawn(function()
	while task.wait(0.1) do
		if autoUpgradeSpeed1 then
			pcall(function() UpgradeSpeedRemote:InvokeServer(1) end)
		end
	end
end)

task.spawn(function()
	while task.wait(0.1) do
		if autoUpgradeSpeed10 then
			pcall(function() UpgradeSpeedRemote:InvokeServer(10) end)
		end
	end
end)

--------------------------------------------------------
-- AUTO COLLECT / REBIRTH / SELL (AUTO)
--------------------------------------------------------
local AutoCollectRemote = ReplicatedStorage:WaitForChild("Packages"):WaitForChild("Net"):WaitForChild("RF/Plot.PlotAction")
local RebirthRemote     = ReplicatedStorage:WaitForChild("RemoteFunctions"):WaitForChild("Rebirth")

local AutoCollect  = false
local AutoRebirth  = false
local AutoSellTool = false
local SellDelay    = 1

local SlotList = {}
for i = 1, 20 do table.insert(SlotList, tostring(i)) end

local function GetMyBaseName()
	local basesFolder = workspace:WaitForChild("Bases")
	local char  = player.Character
	local root  = char and char:FindFirstChild("HumanoidRootPart")
	if not root then return nil end
	local closestBase, shortestDist = nil, math.huge
	for _, base in pairs(basesFolder:GetChildren()) do
		if base:IsA("Model") and base.PrimaryPart then
			local dist = (base.PrimaryPart.Position - root.Position).Magnitude
			if dist < shortestDist then
				shortestDist = dist
				closestBase  = base
			end
		end
	end
	return closestBase and closestBase.Name or nil
end

-- Auto Collect loop
task.spawn(function()
	while task.wait(1) do
		if AutoCollect then
			local baseName = GetMyBaseName()
			if not baseName then continue end
			for _, slot in ipairs(SlotList) do
				if not AutoCollect then break end
				pcall(function() AutoCollectRemote:InvokeServer("Collect Money", baseName, slot) end)
				task.wait(0.05)
			end
		end
	end
end)

-- Auto Rebirth loop
task.spawn(function()
	while task.wait(1) do
		if AutoRebirth then
			pcall(function() RebirthRemote:InvokeServer() end)
		end
	end
end)

--------------------------------------------------------
-- RAYFIELD GUI
--------------------------------------------------------
local Window = Rayfield:CreateWindow({
	Name = "Escape Tsunami Free Script",
	Icon = 0,
	LoadingTitle = "ETFB Script",
	LoadingSubtitle = "by community",
	Theme = "Default",
	DisableRayfieldPrompts = false,
	DisableBuildWarnings = false,
	ConfigurationSaving = {
		Enabled = false,
	},
	KeySystem = false,
})

-- MAIN TAB
local MainTab = Window:CreateTab("Main", 4483362458)

MainTab:CreateToggle({
	Name = "God Mode",
	CurrentValue = false,
	Flag = "GodMode",
	Callback = function(state)
		if state then
			enableGodmode()
			enableInstantTake() -- auto-enable fast take with god mode
			showNotification("GOD MODE ON", "Fast Take also enabled automatically")
		else
			cleanupGodmode()
			disableInstantTake()
		end
	end,
})

MainTab:CreateToggle({
	Name = "Fast Take",
	CurrentValue = false,
	Flag = "FastTake",
	Callback = function(state)
		if state then
			enableInstantTake()
		else
			disableInstantTake()
		end
	end,
})

MainTab:CreateToggle({
	Name = "VIP Bypass",
	CurrentValue = false,
	Flag = "VIPBypass",
	Callback = function(state)
		if state then
			enableVIP()
			showNotification("VIP BYPASS ON", "VIP walls disabled")
		else
			disableVIP()
		end
	end,
})

MainTab:CreateToggle({
	Name = "Infinite Zoom",
	CurrentValue = false,
	Flag = "InfiniteZoom",
	Callback = function(state)
		if state then
			enableInfiniteZoom()
			showNotification("Infinite Zoom ON", "Scroll out as far as you want")
		else
			disableInfiniteZoom()
		end
	end,
})

-- ESP TAB
local ESPTab = Window:CreateTab("ESP", 4483362458)

ESPTab:CreateToggle({
	Name = "Lucky Block ESP",
	CurrentValue = false,
	Flag = "LuckyESP",
	Callback = function(state)
		luckyESPEnabled = state
		if state then
			enableLuckyESP()
			local filterText = luckyESPFilter == "All" and "all rarities" or luckyESPFilter
			showNotification("Lucky Block ESP", "ESP enabled — showing " .. filterText)
		else
			disableLuckyESP()
		end
	end,
})

ESPTab:CreateDropdown({
	Name = "Lucky Block Rarity Filter",
	Options = {
		"All",
		"COMMON",
		"UNCOMMON",
		"RARE",
		"EPIC",
		"LEGENDARY",
		"MYTHICAL",
		"COSMIC",
		"SECRET",
		"CELESTIAL",
		"DIVINE",
		"RADIOACTIVE",
		"UFO",
		"MYTHIC",
		"ADMIN",
	},
	CurrentOption = {"All"},
	MultipleOptions = false,
	Flag = "LuckyESPFilter",
	Callback = function(selected)
		-- Rayfield passes the selected option as a table
		local choice = type(selected) == "table" and selected[1] or selected
		luckyESPFilter = choice or "All"
		-- If ESP is already on, redraw immediately with the new filter
		if luckyESPEnabled then
			refreshLuckyESP()
		end
	end,
})

ESPTab:CreateToggle({
	Name = "Brainrot ESP",
	CurrentValue = false,
	Flag = "BrainrotESP",
	Callback = function(state)
		brainrotESPEnabled = state
		if state then
			enableBrainrotESP()
			local filterText = brainrotESPFilter == "All" and "all rarities" or brainrotESPFilter
			showNotification("Brainrot ESP", "ESP enabled — showing " .. filterText)
		else
			disableBrainrotESP()
		end
	end,
})

ESPTab:CreateDropdown({
	Name = "Brainrot Rarity Filter",
	Options = {
		"All",
		"COMMON",
		"UNCOMMON",
		"RARE",
		"EPIC",
		"COSMIC",
		"LEGENDARY",
		"MYTHICAL",
		"SECRET",
		"CELESTIAL",
		"DIVINE",
		"INFINITY",
	},
	CurrentOption = {"All"},
	MultipleOptions = false,
	Flag = "BrainrotESPFilter",
	Callback = function(selected)
		local choice = type(selected) == "table" and selected[1] or selected
		brainrotESPFilter = choice or "All"
		if brainrotESPEnabled then
			refreshBrainrotESP()
		end
	end,
})


-- MISC TAB
local MiscTab = Window:CreateTab("Misc", 4483362458)

MiscTab:CreateToggle({
	Name = "Auto Upgrade Speed +1",
	CurrentValue = false,
	Flag = "AutoUpgradeSpeed1",
	Callback = function(state)
		autoUpgradeSpeed1 = state
		showNotification("Auto Upgrade", state and "Auto Speed +1 activated!" or "Auto Speed +1 stopped.")
	end,
})

MiscTab:CreateToggle({
	Name = "Auto Upgrade Speed +10",
	CurrentValue = false,
	Flag = "AutoUpgradeSpeed10",
	Callback = function(state)
		autoUpgradeSpeed10 = state
		showNotification("Auto Upgrade", state and "Auto Speed +10 activated!" or "Auto Speed +10 stopped.")
	end,
})

MiscTab:CreateButton({
	Name = "Upgrade Speed +1 (One-time)",
	Callback = function()
		pcall(function() UpgradeSpeedRemote:InvokeServer(1) end)
		showNotification("Upgrade", "Speed +1 requested!")
	end,
})

MiscTab:CreateButton({
	Name = "Upgrade Speed +10 (One-time)",
	Callback = function()
		pcall(function() UpgradeSpeedRemote:InvokeServer(10) end)
		showNotification("Upgrade", "Speed +10 requested!")
	end,
})

MiscTab:CreateButton({
	Name = "Upgrade Carry (One-time)",
	Callback = function()
		pcall(function()
			ReplicatedStorage:WaitForChild("RemoteFunctions"):WaitForChild("UpgradeCarry"):InvokeServer()
		end)
		showNotification("Upgrade Carry", "Carry upgrade requested!")
	end,
})

-- AUTO TAB
local AutoTab = Window:CreateTab("Auto", 4483362458)

AutoTab:CreateToggle({
	Name = "Auto Collect Cash",
	CurrentValue = false,
	Flag = "AutoCollect",
	Callback = function(state)
		AutoCollect = state
		showNotification("Auto Collect", state and "Auto Collect Cash ON" or "Auto Collect Cash OFF")
	end,
})

AutoTab:CreateToggle({
	Name = "Auto Rebirth",
	CurrentValue = false,
	Flag = "AutoRebirth",
	Callback = function(state)
		AutoRebirth = state
		showNotification("Auto Rebirth", state and "Auto Rebirth ON" or "Auto Rebirth OFF")
	end,
})

AutoTab:CreateInput({
	Name = "Sell Tool Delay (seconds)",
	CurrentValue = "1",
	PlaceholderText = "e.g. 1",
	NumbersOnly = true,
	Flag = "SellDelay",
	Callback = function(val)
		local num = tonumber(val)
		if num and num > 0 then
			SellDelay = num
			showNotification("Sell Delay", "Delay set to " .. num .. "s")
		end
	end,
})

AutoTab:CreateToggle({
	Name = "Auto Sell Tool",
	CurrentValue = false,
	Flag = "AutoSellTool",
	Callback = function(state)
		AutoSellTool = state
		showNotification("Auto Sell", state and "Auto Sell Tool ON" or "Auto Sell Tool OFF")
		if state then
			task.spawn(function()
				while AutoSellTool do
					pcall(function()
						ReplicatedStorage:WaitForChild("RemoteFunctions"):WaitForChild("SellTool"):InvokeServer()
					end)
					task.wait(SellDelay)
				end
			end)
		end
	end,
})

AutoTab:CreateButton({
	Name = "Sell All Inventory",
	Callback = function()
		pcall(function()
			ReplicatedStorage:WaitForChild("RemoteFunctions"):WaitForChild("SellAll"):InvokeServer()
		end)
		showNotification("Sell All", "Successfully sold all inventory!")
	end,
})

-- Cleanup on gui destroy
Rayfield.OnDestroy = function()
	cleanupGodmode()
	disableInstantTake()
	disableVIP()
	disableLuckyESP()
	disableBrainrotESP()
	AutoCollect  = false
	AutoRebirth  = false
	AutoSellTool = false
	autoUpgradeSpeed1  = false
	autoUpgradeSpeed10 = false
end
